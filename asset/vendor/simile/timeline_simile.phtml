<?php
/**
 * @var \Laminas\View\Renderer\PhpRenderer $this
 * @var int $blockId
 * @var array $data
 */

?>

<div id="timeline-<?= $blockId ?>" class="timeline"></div>
<script>
    jQuery(document).ready(function($) {
        var params = <?= $data['viewer'] ?>;
        if (typeof params.centerDate === 'undefined') {
            params.centerDate = <?= json_encode($data['center_date']) ?>;
        }

        oTimeline.loadTimeline(
            'timeline-<?= blockId ?>',
            '<?= $this->url('api/timeline', ['block-id' => $blockId]) ?>',
            params
        );
    });
</script>
